# Набор Общих модулей

## AddSpriti

Класс который генерирует объект со всеми необходимыми параметрами для использования анимации или статичных фреймов. Он нужен для использования в [StaticFrame](#StaticFrame) и [AnimFrame](#AnimFrame)

```js
import AddSpriti from "./moduls/common/add-sprit.js";

import imgSrc from "../img/player.png";
import jsonSrc from "../img/player.json";

const sprite = new AddSpriti(engine, render, imgSrc, jsonSrc);
```

### Обязательные параметры:

|  Параметр |                                                                          |
| --------: | :----------------------------------------------------------------------- |
|  `engine` | Движок в котором находится тела для которых будут использоваться спрайты |
|  `render` | Рендер в котором будет обрисовывается спрайт                             |
|  `imgSrc` | Изображения со спрайтом                                                  |
| `jsonSrc` | .json с координатами фреймов спрайта                                     |

`imgSrc` Изображения спрайтов генерируется с помочу программы ["Free texture packer"](http://free-tex-packer.com) с учетом специфики сборника изображения нужно импортировать в js [(Static Assets vite.js)](https://vitejs.dev/guide/features.html#static-assets).

`jsonSrc` .json генерируется в месте с изображением в программе ["Free texture packer"](http://free-tex-packer.com). Его нужно импортировать в js, сборщик автоматически его парсит и преобразует в _Object_ [(JSON vite.js)](https://vitejs.dev/guide/features.html#json).

Для повторного использования спрайта присваивайте его к переменной как в примере выше.

---

## StaticFrame

Класс с помощью которого применяется статичный фрейм(изображения) из [спрайта](#AddSpriti) для любых тел в сцене. Значения по умолчанию в примере ниже.

```js
import StaticFrame from "./moduls/common/static-frame.js";

const bodyStatic = new StaticFrame(sprite, body, "frameName", {
	visible: true,
	rotateFrame: true,
	scale: 1,
	scaleX: 1,
	scaleY: 1,
});
```

### Обязательные параметры:

|    Параметр |   Тип    |                                                                |
| ----------: | :------: | :------------------------------------------------------------- |
|    `sprite` |          | [Cпрайт AddSpriti](#AddSpriti) из которого берется изображения |
|      `body` |          | Тело на которое будет накладываться изображение                |
| `frameName` | _String_ | Имя фрейма из [спрайта](#AddSpriti)                            |

`sprite` Спрайт должен быть сгенерирован за ранее. [Смотреть как создать спрайт](#AddSpriti).

`frameName` После создания спрайта через программу ["Free texture packer"](http://free-tex-packer.com) создается .json в котором формируются ключи/имена фреймов. Это ключи/имена нужно и указать.

```.json
{
"frames": {
    "run/4": {
        "x": 1,
        "y": 1,
        "w": 71,
        "h": 67
    },
    "idle/1": {
        "x": 1,
        "y": 70,
        "w": 71,
        "h": 67
    },
},
}
```

### Не обязательные параметры:

Передаются объектом _Object_

|      Параметр |    Тип    |                                                                         |
| ------------: | :-------: | :---------------------------------------------------------------------- |
|     `visible` | _Boolean_ | Показывает/скрывает фрейм                                               |
| `rotateFrame` | _Boolean_ | Запрещает/разрешает вращается фрейму вместе с телом                     |
|       `scale` | _Number_  | Пропорционально увеличивает фрейм. Работает вместе с `scaleX`, `scaleY` |
|      `scaleX` | _Number_  | Увеличивает изображения по оси X. Работает вместе с `scale`             |
|      `scaleY` | _Number_  | Увеличивает изображения по оси Y. Работает вместе с `scale`             |

`scaleX`/`scaleY` Если поставить отрицательное значение `-1` то фрейм зеркально отразится по X/Y.

### Методы

`show()` Используется внутри функции `beforeUpdate`. Отривосывает фрейм.

---

## AnimFrame

Класс с помощью которого применяется анимация из [спрайта](#AddSpriti) для любых тел в сцене. Значения по умолчанию в примере ниже.

```js
import AnimFrame from "./moduls/common/anim-frame.js";

const bodyStatic = new AnimFrame(sprite, body, frameGroop, {
	rotateFrame: true,
	scale: 1,
	scaleX: 1,
	scaleY: 1,
	play: true,
	reloadFrame: 30,
	animCycles: Infinity,
	endCyclesLastFrame: false,
});
```

### Обязательные параметры:

|     Параметр |        Тип         |                                                                |
| -----------: | :----------------: | :------------------------------------------------------------- |
|     `sprite` |                    | [Cпрайт AddSpriti](#AddSpriti) из которого берется изображения |
|       `body` |                    | Тело на которое будет накладываться изображение                |
| `frameGroop` | _String_ / _Array_ | Название группы из .json / Список имен фореймов                |

`sprite` Спрайт должен быть сгенерирован за ранее. [Смотреть как создать спрайт](#AddSpriti).

`frameGroop` При создании спрайта в ["Free texture packer"](http://free-tex-packer.com) если была экспортирована папка с кадрами то имя фрейма в .json будут `имяПапки/имяФайла`. Если указать `имяПапки` в `frameGroop` то будет поругиваться только кадры относящиеся к данной паке. Так же `имяФайла` рекомендуется делать простым поочередным нормированием 1, 2, 3 и т.д. Либо можно сформировать список из имен фреймов, из которых будет проигрывается анимация.

```.json
{
"frames": {
    "run/4": {
        "x": 1,
        "y": 1,
        "w": 71,
        "h": 67
    },
    "idle/1": {
        "x": 1,
        "y": 70,
        "w": 71,
        "h": 67
    },
},
}
```

### Не обязательные параметры:

Передаются объектом _Object_

|             Параметр |    Тип    |                                                                                               |
| -------------------: | :-------: | :-------------------------------------------------------------------------------------------- |
|        `rotateFrame` | _Boolean_ | Запрещает/разрешает вращается фрейму вместе с телом                                           |
|              `scale` | _Number_  | Пропорционально увеличивает фрейм. Работает вместе с `scaleX`, `scaleY`                       |
|             `scaleX` | _Number_  | Увеличивает изображения по оси X. Работает вместе с `scale`                                   |
|             `scaleY` | _Number_  | Увеличивает изображения по оси Y. Работает вместе с `scale`                                   |
|               `play` | _Boolean_ | Включает/выключает проигрывание анимацию                                                      |
|        `reloadFrame` | _Number_  | Раз в какое количество кадров будет сменятся фрейм в анимации                                 |
|         `animCycles` | _Number_  | Сколько полных циклов анимации пройдет.                                                       |
| `endCyclesLastFrame` | _Boolean_ | Если указано значение `animCycles` анимация закончится на первом/последним фрейме в анимации. |

`scaleX`/`scaleY` Если поставить отрицательное значение `-1` то фрейм зеркально отразится по X/Y.

`reloadFrame` При учете 60fps(кадров в секунду) Если указать значение 30 то каждые 0.5 секунды будет сменятся кадр.

`animCycles` Обновлять значение нужно в ручную(

### Методы

`animPlay()` Используется внутри функции `beforeUpdate`. Отривосывает анимацию.

---
